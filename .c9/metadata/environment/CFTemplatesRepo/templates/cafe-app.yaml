{"filter":false,"title":"cafe-app.yaml","tooltip":"/CFTemplatesRepo/templates/cafe-app.yaml","undoManager":{"mark":1,"position":1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":45,"column":0},"action":"remove","lines":["AWSTemplateFormatVersion: 2010-09-09","Description: Cafe application","","Parameters:","","  LatestAmiId:","    Type: 'AWS::SSM::Parameter::Value<AWS::EC2::Image::Id>'","    Default: '/aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2'","","  CafeNetworkParameter:","    Type: String","    Default: update-cafe-network","","Mappings:","","  RegionMap:","    us-east-1:","      \"keypair\": \"vockey\"","    us-west-2:","      \"keypair\": \"cafe-oregon\"","","Resources:","","  CafeSG:","    Type: 'AWS::EC2::SecurityGroup'","    Properties:","      GroupDescription: Enable SSH, HTTP access","      VpcId: !ImportValue","        'Fn::Sub': '${CafeNetworkParameter}-VpcID'","      Tags:","        - Key: Name","          Value: CafeSG","      SecurityGroupIngress:","        - IpProtocol: tcp","          FromPort: '80'","          ToPort: '80'","          CidrIp: 0.0.0.0/0","        - IpProtocol: tcp","          FromPort: '22'","          ToPort: '22'","          CidrIp: 0.0.0.0/0","","Outputs:","  WebServerPublicIP:","    Value: !GetAtt 'CafeInstance.PublicIp'",""],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":85,"column":42},"action":"insert","lines":["AWSTemplateFormatVersion: 2010-09-09","Description: Cafe application","","Parameters:","","  LatestAmiId:","    Type: 'AWS::SSM::Parameter::Value<AWS::EC2::Image::Id>'","    Default: '/aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2'","","  CafeNetworkParameter:","    Type: String","    Default: update-cafe-network","    ","  IntancesTypeParameters:","    Type: String","    Default: t2.small","    AllowedValues:","      - t2.micro","      - t2.small","      - t3.micro","      - t3.small","","Mappings:","","  RegionMap:","    us-east-1:","      \"keypair\": \"vockey\"","    us-west-2:","      \"keypair\": \"cafe-oregon\"","","Resources:","","  CafeInstance:","    Type: 'AWS::EC2::Instance'","    Properties:","      ImageId: !Ref LatestAmiId","      InstanceType: !Ref IntancesTypeParameters","      KeyName: !FindInMap [RegionMap, !Ref \"AWS::Region\", keypair]","      IamInstanceProfile: CafeRole","      NetworkInterfaces:","        - DeviceIndex: '0'","          AssociatePublicIpAddress: 'true'","          SubnetId: !ImportValue","            'Fn::Sub': '${CafeNetworkParameter}-SubnetID'","          GroupSet:","            - !Ref CafeSG","      Tags:","        - Key: Name","          Value: Cafe Web Server","      UserData:","        Fn::Base64:","          !Sub |","            #!/bin/bash","            yum -y update","            yum install -y httpd mariadb-server wget","            amazon-linux-extras install -y lamp-mariadb10.2-php7.2 php7.2","            systemctl enable httpd","            systemctl start httpd","            systemctl enable mariadb","            systemctl start mariadb","            wget https://aws-tc-largeobjects.s3.us-west-2.amazonaws.com/CUR-TF-200-ACACAD-2-91555/14-lab-mod10-challenge-CFn/s3/cafe-app.sh","            chmod +x cafe-app.sh","            ./cafe-app.sh","","  CafeSG:","    Type: 'AWS::EC2::SecurityGroup'","    Properties:","      GroupDescription: Enable SSH, HTTP access","      VpcId: !ImportValue","        'Fn::Sub': '${CafeNetworkParameter}-VpcID'","      Tags:","        - Key: Name","          Value: CafeSG","      SecurityGroupIngress:","        - IpProtocol: tcp","          FromPort: '80'","          ToPort: '80'","          CidrIp: 0.0.0.0/0","        - IpProtocol: tcp","          FromPort: '22'","          ToPort: '22'","          CidrIp: 0.0.0.0/0","","Outputs:","  WebServerPublicIP:","    Value: !GetAtt 'CafeInstance.PublicIp'"],"id":3}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":85,"column":42},"end":{"row":85,"column":42},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1733400660442,"hash":"8ba702c63761d7602a816d219a5ec75e9fbed354"}